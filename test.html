<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>学生考勤管理系统</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.8/dist/chart.umd.min.js"></script>
    <script>
        // Tailwind配置
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#165DFF',
                        secondary: '#36CFC9',
                        warning: '#FF7D00',
                        danger: '#F53F3F',
                        success: '#00B42A',
                        gray: {
                            100: '#F2F3F5',
                            200: '#E5E6EB',
                            300: '#C9CDD4',
                            400: '#86909C',
                            500: '#4E5969',
                            600: '#272E3B',
                            700: '#1D2129',
                        }
                    },
                    fontFamily: {
                        inter: ['Inter', 'system-ui', 'sans-serif'],
                    },
                }
            }
        }
    </script>
    <style type="text/tailwindcss">
        @layer utilities {
            .content-auto {
                content-visibility: auto;
            }
            .sidebar-item {
                @apply flex items-center gap-3 px-4 py-3 rounded-lg transition-all duration-200;
            }
            .sidebar-item.active {
                @apply bg-primary/10 text-primary font-medium;
            }
            .sidebar-item:hover:not(.active) {
                @apply bg-gray-100;
            }
            .btn {
                @apply px-4 py-2 rounded-lg font-medium transition-all duration-200 flex items-center gap-2;
            }
            .btn-primary {
                @apply bg-primary text-white hover:bg-primary/90;
            }
            .btn-secondary {
                @apply bg-white border border-gray-200 text-gray-700 hover:bg-gray-50;
            }
            .btn-danger {
                @apply bg-danger text-white hover:bg-danger/90;
            }
            .btn-success {
                @apply bg-success text-white hover:bg-success/90;
            }
            .card {
                @apply bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden;
            }
            .form-input {
                @apply w-full px-4 py-2.5 rounded-lg border border-gray-200 focus:border-primary focus:ring-1 focus:ring-primary outline-none transition-all duration-200;
            }
            .badge {
                @apply px-2 py-1 rounded-full text-xs font-medium;
            }
            .page-transition {
                @apply transition-opacity duration-300 ease-in-out;
            }
        }
    </style>
</head>
<body class="font-inter bg-gray-100 text-gray-700 min-h-screen flex flex-col">
    <!-- 登录界面 (默认显示) -->
    <div id="login-page" class="flex-1 flex items-center justify-center p-4">
        <div class="card w-full max-w-md w-[380px]">
            <div class="p-6 md:p-8">
                <div class="text-center mb-8">
                    <div class="w-16 h-16 bg-primary/10 rounded-full flex items-center justify-center mx-auto mb-4">
                        <i class="fa fa-graduation-cap text-2xl text-primary"></i>
                    </div>
                    <h2 class="text-[clamp(1.5rem,3vw,1.75rem)] font-bold text-gray-700">学生考勤管理系统</h2>
                    <p class="text-gray-400 mt-2">请登录您的账号</p>
                </div>

                <div class="space-y-4">
                    <div class="space-y-2">
                        <label class="block text-sm font-medium text-gray-500">用户类型</label>
                        <div class="flex gap-4">
                            <label class="flex items-center gap-2 flex-1 cursor-pointer">
                                <input type="radio" name="user-type" value="student" checked class="form-radio text-primary">
                                <span>普通学生</span>
                            </label>
                            <label class="flex items-center gap-2 flex-1 cursor-pointer">
                                <input type="radio" name="user-type" value="admin" class="form-radio text-primary">
                                <span>管理员</span>
                            </label>
                        </div>
                    </div>

                    <div class="space-y-2">
                        <label for="login-id" class="block text-sm font-medium text-gray-500">账号</label>
                        <div class="relative">
                            <i class="fa fa-user absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"></i>
                            <input type="text" id="login-id" placeholder="请输入学号/管理员ID" class="form-input pl-10">
                        </div>
                    </div>

                    <div class="space-y-2">
                        <label for="login-password" class="block text-sm font-medium text-gray-500">密码</label>
                        <div class="relative">
                            <i class="fa fa-lock absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"></i>
                            <input type="password" id="login-password" placeholder="请输入密码" class="form-input pl-10">
                        </div>
                    </div>

                    <div id="admin-key-field" class="hidden space-y-2">
                        <label for="admin-key" class="block text-sm font-medium text-gray-500">管理员密钥</label>
                        <div class="relative">
                            <i class="fa fa-key absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"></i>
                            <input type="password" id="admin-key" placeholder="请输入管理员密钥" class="form-input pl-10">
                        </div>
                    </div>

                    <div class="flex justify-between items-center mt-2">
                        <a href="#" id="go-to-register" class="text-sm text-primary hover:underline">注册账号</a>
                        <a href="#" class="text-sm text-primary hover:underline">忘记密码?</a>
                    </div>

                    <button id="login-btn" class="btn btn-primary w-full justify-center mt-4">
                        <i class="fa fa-sign-in"></i> 登录
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- 注册界面 (默认隐藏) -->
    <div id="register-page" class="hidden flex-1 flex items-center justify-center p-4">
        <div class="card w-full max-w-md w-[380px]">
            <div class="p-6 md:p-8">
                <div class="text-center mb-8">
                    <div class="w-16 h-16 bg-primary/10 rounded-full flex items-center justify-center mx-auto mb-4">
                        <i class="fa fa-user-plus text-2xl text-primary"></i>
                    </div>
                    <h2 class="text-[clamp(1.5rem,3vw,1.75rem)] font-bold text-gray-700">账号注册</h2>
                    <p class="text-gray-400 mt-2">创建您的系统账号</p>
                </div>

                <div class="space-y-4">
                    <div class="space-y-2">
                        <label class="block text-sm font-medium text-gray-500">用户类型</label>
                        <div class="flex gap-4">
                            <label class="flex items-center gap-2 flex-1 cursor-pointer">
                                <input type="radio" name="register-type" value="student" checked class="form-radio text-primary">
                                <span>普通学生</span>
                            </label>
                            <label class="flex items-center gap-2 flex-1 cursor-pointer">
                                <input type="radio" name="register-type" value="admin" class="form-radio text-primary">
                                <span>管理员</span>
                            </label>
                        </div>
                    </div>

                    <div id="student-fields" class="space-y-4">
                        <div class="space-y-2">
                            <label for="register-student-id" class="block text-sm font-medium text-gray-500">学号</label>
                            <input type="text" id="register-student-id" placeholder="请输入学号" class="form-input">
                        </div>

                        <div class="space-y-2">
                            <label for="register-name" class="block text-sm font-medium text-gray-500">姓名</label>
                            <input type="text" id="register-name" placeholder="请输入姓名" class="form-input">
                        </div>

                        <div class="space-y-2">
                            <label for="register-age" class="block text-sm font-medium text-gray-500">年龄</label>
                            <input type="number" id="register-age" placeholder="请输入年龄" class="form-input">
                        </div>

                        <div class="space-y-2">
                            <label for="register-idcard" class="block text-sm font-medium text-gray-500">身份证号码</label>
                            <input type="text" id="register-idcard" placeholder="用于修改密码验证" class="form-input">
                        </div>
                    </div>

                    <div id="admin-fields" class="hidden space-y-4">
                        <div class="space-y-2">
                            <label for="register-admin-id" class="block text-sm font-medium text-gray-500">管理员ID</label>
                            <input type="text" id="register-admin-id" placeholder="系统分配的管理员ID" class="form-input">
                        </div>

                        <div class="space-y-2">
                            <label for="register-admin-key" class="block text-sm font-medium text-gray-500">管理员密钥</label>
                            <input type="password" id="register-admin-key" placeholder="系统分配的管理员密钥" class="form-input">
                        </div>
                    </div>

                    <div class="space-y-2">
                        <label for="register-password" class="block text-sm font-medium text-gray-500">密码</label>
                        <input type="password" id="register-password" placeholder="请设置密码" class="form-input">
                    </div>

                    <div class="space-y-2">
                        <label for="register-confirm-password" class="block text-sm font-medium text-gray-500">确认密码</label>
                        <input type="password" id="register-confirm-password" placeholder="请再次输入密码" class="form-input">
                    </div>

                    <div class="flex justify-start items-center mt-2">
                        <a href="#" id="go-to-login" class="text-sm text-primary hover:underline">已有账号? 去登录</a>
                    </div>

                    <button id="register-btn" class="btn btn-primary w-full justify-center mt-4">
                        <i class="fa fa-user-plus"></i> 注册账号
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- 主系统界面 (默认隐藏) -->
    <div id="main-system" class="hidden flex flex-1 overflow-hidden">
        <!-- 侧边栏 -->
        <aside id="sidebar" class="w-64 bg-white border-r border-gray-200 flex flex-col transition-all duration-300 ease-in-out">
            <div class="p-4 border-b border-gray-200">
                <div class="flex items-center gap-3">
                    <div class="w-10 h-10 bg-primary/10 rounded-lg flex items-center justify-center">
                        <i class="fa fa-graduation-cap text-primary"></i>
                    </div>
                    <div>
                        <h3 class="font-bold text-gray-700" id="sidebar-username">学生姓名</h3>
                        <p class="text-xs text-gray-400" id="sidebar-role">普通学生</p>
                    </div>
                </div>
            </div>

            <nav class="flex-1 overflow-y-auto p-2">
                <ul class="space-y-1">
                    <li>
                        <a href="#dashboard" class="sidebar-item active" data-page="dashboard">
                            <i class="fa fa-tachometer w-5 text-center"></i>
                            <span>首页</span>
                        </a>
                    </li>
                    <li>
                        <a href="#attendance" class="sidebar-item" data-page="attendance">
                            <i class="fa fa-check-square-o w-5 text-center"></i>
                            <span>考勤管理</span>
                        </a>
                    </li>
                    <li>
                        <a href="#leave" class="sidebar-item" data-page="leave">
                            <i class="fa fa-calendar-o w-5 text-center"></i>
                            <span>请假管理</span>
                        </a>
                    </li>
                    <li>
                        <a href="#profile" class="sidebar-item" data-page="profile">
                            <i class="fa fa-user w-5 text-center"></i>
                            <span>个人信息</span>
                        </a>
                    </li>
                    <li>
                        <a href="#feedback" class="sidebar-item" data-page="feedback">
                            <i class="fa fa-comment-o w-5 text-center"></i>
                            <span>意见反馈</span>
                        </a>
                    </li>
                    <!-- 管理员专属菜单 -->
                    <li id="admin-menu-members" class="hidden">
                        <a href="#members" class="sidebar-item" data-page="members">
                            <i class="fa fa-users w-5 text-center"></i>
                            <span>成员管理</span>
                        </a>
                    </li>
                    <li id="admin-menu-notifications" class="hidden">
                        <a href="#notifications" class="sidebar-item" data-page="notifications">
                            <i class="fa fa-bell-o w-5 text-center"></i>
                            <span>通知管理</span>
                        </a>
                    </li>
                    <li id="admin-menu-feedbacks" class="hidden">
                        <a href="#manage-feedbacks" class="sidebar-item" data-page="manage-feedbacks">
                            <i class="fa fa-comments-o w-5 text-center"></i>
                            <span>反馈管理</span>
                        </a>
                    </li>
                </ul>
            </nav>

            <div class="p-4 border-t border-gray-200">
                <button id="logout-btn" class="sidebar-item w-full justify-start text-gray-500 hover:text-danger hover:bg-danger/5">
                    <i class="fa fa-sign-out w-5 text-center"></i>
                    <span>退出登录</span>
                </button>
            </div>
        </aside>

        <!-- 主内容区 -->
        <main class="flex-1 overflow-y-auto bg-gray-50 p-6">
            <!-- 顶部导航 -->
            <div class="flex justify-between items-center mb-6">
                <h1 class="text-[clamp(1.5rem,3vw,2rem)] font-bold text-gray-700" id="page-title">首页</h1>
                <div class="flex items-center gap-4">
                    <div class="relative">
                        <button id="notification-btn" class="w-10 h-10 rounded-full flex items-center justify-center hover:bg-gray-100 relative">
                            <i class="fa fa-bell-o text-gray-500"></i>
                            <span class="absolute top-1 right-1 w-2 h-2 bg-primary rounded-full"></span>
                        </button>
                    </div>
                    <div class="flex items-center gap-3">
                        <div class="w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center text-primary">
                            <span id="user-avatar">T</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 首页 (默认显示) -->
            <div id="dashboard-page" class="space-y-6 page-transition">
                <!-- 统计卡片 -->
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                    <div class="card p-6">
                        <div class="flex justify-between items-start">
                            <div>
                                <p class="text-gray-400 text-sm">本月考勤次数</p>
                                <h3 class="text-2xl font-bold mt-1">22</h3>
                                <p class="text-success text-xs mt-2">
                                    <i class="fa fa-arrow-up"></i> 3 次 (较上月)
                                </p>
                            </div>
                            <div class="w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center text-primary">
                                <i class="fa fa-check-circle-o text-xl"></i>
                            </div>
                        </div>
                    </div>

                    <div class="card p-6">
                        <div class="flex justify-between items-start">
                            <div>
                                <p class="text-gray-400 text-sm">本月请假次数</p>
                                <h3 class="text-2xl font-bold mt-1">2</h3>
                                <p class="text-danger text-xs mt-2">
                                    <i class="fa fa-arrow-up"></i> 1 次 (较上月)
                                </p>
                            </div>
                            <div class="w-12 h-12 bg-warning/10 rounded-lg flex items-center justify-center text-warning">
                                <i class="fa fa-calendar-times-o text-xl"></i>
                            </div>
                        </div>
                    </div>

                    <div class="card p-6">
                        <div class="flex justify-between items-start">
                            <div>
                                <p class="text-gray-400 text-sm">未处理反馈</p>
                                <h3 class="text-2xl font-bold mt-1">1</h3>
                                <p class="text-warning text-xs mt-2">
                                    <i class="fa fa-clock-o"></i> 待处理
                                </p>
                            </div>
                            <div class="w-12 h-12 bg-yellow-100 rounded-lg flex items-center justify-center text-yellow-500">
                                <i class="fa fa-comment-o text-xl"></i>
                            </div>
                        </div>
                    </div>

                    <div class="card p-6">
                        <div class="flex justify-between items-start">
                            <div>
                                <p class="text-gray-400 text-sm">考勤率</p>
                                <h3 class="text-2xl font-bold mt-1">92%</h3>
                                <p class="text-success text-xs mt-2">
                                    <i class="fa fa-arrow-up"></i> 2% (较上月)
                                </p>
                            </div>
                            <div class="w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center text-green-500">
                                <i class="fa fa-pie-chart text-xl"></i>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 考勤趋势图表 -->
                <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                    <div class="card lg:col-span-2 p-6">
                        <h3 class="font-bold text-lg text-gray-700 mb-6">考勤趋势</h3>
                        <div class="h-64">
                            <canvas id="attendance-chart"></canvas>
                        </div>
                    </div>
                    
                    <div class="card p-6">
                        <h3 class="font-bold text-lg text-gray-700 mb-6">考勤状态分布</h3>
                        <div class="h-64">
                            <canvas id="status-chart"></canvas>
                        </div>
                    </div>
                </div>

                <!-- 最近通知 -->
                <div class="card">
                    <div class="p-6 border-b border-gray-100">
                        <h3 class="font-bold text-lg text-gray-700">最近通知</h3>
                    </div>
                    <div class="divide-y divide-gray-100">
                        <div class="p-4 hover:bg-gray-50 transition-colors">
                            <div class="flex justify-between items-start">
                                <div>
                                    <h4 class="font-medium text-gray-700">期中考试安排通知</h4>
                                    <p class="text-gray-400 text-sm mt-1">下周三进行期中考试，请各位同学做好准备...</p>
                                </div>
                                <span class="text-xs text-gray-400">2024-05-10</span>
                            </div>
                        </div>
                        <div class="p-4 hover:bg-gray-50 transition-colors">
                            <div class="flex justify-between items-start">
                                <div>
                                    <h4 class="font-medium text-gray-700">五一假期调课通知</h4>
                                    <p class="text-gray-400 text-sm mt-1">五一假期期间调课安排如下，请注意查看课程表...</p>
                                </div>
                                <span class="text-xs text-gray-400">2024-04-28</span>
                            </div>
                        </div>
                        <div class="p-4 hover:bg-gray-50 transition-colors">
                            <div class="flex justify-between items-start">
                                <div>
                                    <h4 class="font-medium text-gray-700">校园安全检查通知</h4>
                                    <p class="text-gray-400 text-sm mt-1">本周五将进行校园安全检查，请各班级做好准备...</p>
                                </div>
                                <span class="text-xs text-gray-400">2024-04-25</span>
                            </div>
                        </div>
                    </div>
                    <div class="p-4 text-center border-t border-gray-100">
                        <a href="#" class="text-primary text-sm hover:underline" data-page="notifications">查看全部通知</a>
                    </div>
                </div>

                <!-- 最近考勤记录 -->
                <div class="card">
                    <div class="p-6 border-b border-gray-100 flex justify-between items-center">
                        <h3 class="font-bold text-lg text-gray-700">最近考勤记录</h3>
                        <a href="#" class="text-primary text-sm hover:underline" data-page="attendance">查看全部</a>
                    </div>
                    <div class="overflow-x-auto">
                        <table class="w-full">
                            <thead>
                                <tr class="bg-gray-50">
                                    <th class="text-left p-4 text-xs font-medium text-gray-500 uppercase tracking-wider">日期</th>
                                    <th class="text-left p-4 text-xs font-medium text-gray-500 uppercase tracking-wider">时间</th>
                                    <th class="text-left p-4 text-xs font-medium text-gray-500 uppercase tracking-wider">状态</th>
                                    <th class="text-left p-4 text-xs font-medium text-gray-500 uppercase tracking-wider">备注</th>
                                </tr>
                            </thead>
                            <tbody class="divide-y divide-gray-100">
                                <tr class="hover:bg-gray-50 transition-colors">
                                    <td class="p-4 text-sm text-gray-700">2024-05-15</td>
                                    <td class="p-4 text-sm text-gray-700">08:30</td>
                                    <td class="p-4">
                                        <span class="badge bg-green-100 text-green-800">已签到</span>
                                    </td>
                                    <td class="p-4 text-sm text-gray-500">正常签到</td>
                                </tr>
                                <tr class="hover:bg-gray-50 transition-colors">
                                    <td class="p-4 text-sm text-gray-700">2024-05-14</td>
                                    <td class="p-4 text-sm text-gray-700">08:45</td>
                                    <td class="p-4">
                                        <span class="badge bg-yellow-100 text-yellow-800">迟到</span>
                                    </td>
                                    <td class="p-4 text-sm text-gray-500">迟到15分钟</td>
                                </tr>
                                <tr class="hover:bg-gray-50 transition-colors">
                                    <td class="p-4 text-sm text-gray-700">2024-05-13</td>
                                    <td class="p-4 text-sm text-gray-700">-</td>
                                    <td class="p-4">
                                        <span class="badge bg-blue-100 text-blue-800">请假</span>
                                    </td>
                                    <td class="p-4 text-sm text-gray-500">事假，已批准</td>
                                </tr>
                                <tr class="hover:bg-gray-50 transition-colors">
                                    <td class="p-4 text-sm text-gray-700">2024-05-12</td>
                                    <td class="p-4 text-sm text-gray-700">08:25</td>
                                    <td class="p-4">
                                        <span class="badge bg-green-100 text-green-800">已签到</span>
                                    </td>
                                    <td class="p-4 text-sm text-gray-500">正常签到</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- 考勤管理页面 -->
            <div id="attendance-page" class="hidden space-y-6 page-transition">
                <div class="flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-6">
                    <div>
                        <h3 class="font-bold text-lg text-gray-700">考勤管理</h3>
                        <p class="text-gray-400 text-sm">查看和管理您的考勤记录</p>
                    </div>
                    <div class="flex gap-3">
                        <!-- 学生端显示签到按钮 -->
                        <button id="check-in-btn" class="btn btn-primary student-only">
                            <i class="fa fa-check"></i> 今日签到
                        </button>
                        <!-- 管理员端显示批量操作按钮 -->
                        <div id="admin-attendance-actions" class="hidden gap-3 flex">
                            <button class="btn btn-secondary">
                                <i class="fa fa-upload"></i> 导入记录
                            </button>
                            <button class="btn btn-secondary">
                                <i class="fa fa-download"></i> 导出记录
                            </button>
                        </div>
                    </div>
                </div>

                <!-- 考勤统计 -->
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-6">
                    <div class="card p-5">
                        <div class="flex items-center gap-4">
                            <div class="w-10 h-10 bg-green-100 rounded-full flex items-center justify-center text-green-600">
                                <i class="fa fa-check"></i>
                            </div>
                            <div>
                                <p class="text-gray-400 text-sm">已签到</p>
                                <h4 class="font-bold text-xl">22 次</h4>
                            </div>
                        </div>
                    </div>
                    <div class="card p-5">
                        <div class="flex items-center gap-4">
                            <div class="w-10 h-10 bg-yellow-100 rounded-full flex items-center justify-center text-yellow-600">
                                <i class="fa fa-clock-o"></i>
                            </div>
                            <div>
                                <p class="text-gray-400 text-sm">迟到</p>
                                <h4 class="font-bold text-xl">3 次</h4>
                            </div>
                        </div>
                    </div>
                    <div class="card p-5">
                        <div class="flex items-center gap-4">
                            <div class="w-10 h-10 bg-red-100 rounded-full flex items-center justify-center text-red-600">
                                <i class="fa fa-times"></i>
                            </div>
                            <div>
                                <p class="text-gray-400 text-sm">缺勤</p>
                                <h4 class="font-bold text-xl">1 次</h4>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 考勤记录筛选 -->
                <div class="card p-6 mb-6">
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <div class="space-y-2">
                            <label class="block text-sm font-medium text-gray-500">日期范围</label>
                            <div class="flex gap-2">
                                <input type="date" class="form-input">
                                <input type="date" class="form-input">
                            </div>
                        </div>
                        <div class="space-y-2">
                            <label class="block text-sm font-medium text-gray-500">考勤状态</label>
                            <select class="form-input">
                                <option value="">全部状态</option>
                                <option value="checked-in">已签到</option>
                                <option value="late">迟到</option>
                                <option value="absent">缺勤</option>
                                <option value="leave">请假</option>
                            </select>
                        </div>
                        <div class="space-y-2 flex items-end">
                            <button class="btn btn-primary w-full">
                                <i class="fa fa-search"></i> 筛选
                            </button>
                        </div>
                    </div>
                </div>

                <!-- 考勤记录表格 -->
                <div class="card">
                    <div class="overflow-x-auto">
                        <table class="w-full">
                            <thead>
                                <tr class="bg-gray-50">
                                    <th class="text-left p-4 text-xs font-medium text-gray-500 uppercase tracking-wider">
                                        <input type="checkbox" class="rounded text-primary focus:ring-primary admin-only">
                                    </th>
                                    <th class="text-left p-4 text-xs font-medium text-gray-500 uppercase tracking-wider">日期</th>
                                    <th class="text-left p-4 text-xs font-medium text-gray-500 uppercase tracking-wider">签到时间</th>
                                    <th class="text-left p-4 text-xs font-medium text-gray-500 uppercase tracking-wider">状态</th>
                                    <th class="text-left p-4 text-xs font-medium text-gray-500 uppercase tracking-wider">备注</th>
                                    <th class="text-left p-4 text-xs font-medium text-gray-500 uppercase tracking-wider">操作</th>
                                </tr>
                            </thead>
                            <tbody class="divide-y divide-gray-100">
                                <tr class="hover:bg-gray-50 transition-colors">
                                    <td class="p-4 admin-only">
                                        <input type="checkbox" class="rounded text-primary focus:ring-primary">
                                    </td>
                                    <td class="p-4 text-sm text-gray-700">2024-05-15</td>
                                    <td class="p-4 text-sm text-gray-700">08:30:25</td>
                                    <td class="p-4">
                                        <span class="badge bg-green-100 text-green-800">已签到</span>
                                    </td>
                                    <td class="p-4 text-sm text-gray-500">正常签到</td>
                                    <td class="p-4">
                                        <div class="flex gap-2">
                                            <button class="text-primary hover:text-primary/80 text-sm" id="feedback-btn">
                                                <i class="fa fa-comment-o"></i> 反馈
                                            </button>
                                            <!-- 管理员端显示编辑按钮 -->
                                            <button class="text-warning hover:text-warning/80 text-sm hidden admin-only">
                                                <i class="fa fa-edit"></i> 编辑
                                            </button>
                                            <button class="text-danger hover:text-danger/80 text-sm hidden admin-only">
                                                <i class="fa fa-trash"></i> 删除
                                            </button>
                                        </div>
                                    </td>
                                </tr>
                                <tr class="hover:bg-gray-50 transition-colors">
                                    <td class="p-4 admin-only">
                                        <input type="checkbox" class="rounded text-primary focus:ring-primary">
                                    </td>
                                    <td class="p-4 text-sm text-gray-700">2024-05-14</td>
                                    <td class="p-4 text-sm text-gray-700">08:45:12</td>
                                    <td class="p-4">
                                        <span class="badge bg-yellow-100 text-yellow-800">迟到</span>
                                    </td>
                                    <td class="p-4 text-sm text-gray-500">迟到15分钟</td>
                                    <td class="p-4">
                                        <div class="flex gap-2">
                                            <button class="text-primary hover:text-primary/80 text-sm" id="feedback-btn">
                                                <i class="fa fa-comment-o"></i> 反馈
                                            </button>
                                            <button class="text-warning hover:text-warning/80 text-sm hidden admin-only">
                                                <i class="fa fa-edit"></i> 编辑
                                            </button>
                                            <button class="text-danger hover:text-danger/80 text-sm hidden admin-only">
                                                <i class="fa fa-trash"></i> 删除
                                            </button>
                                        </div>
                                    </td>
                                </tr>
                                <tr class="hover:bg-gray-50 transition-colors">
                                    <td class="p-4 admin-only">
                                        <input type="checkbox" class="rounded text-primary focus:ring-primary">
                                    </td>
                                    <td class="p-4 text-sm text-gray-700">2024-05-13</td>
                                    <td class="p-4 text-sm text-gray-700">-</td>
                                    <td class="p-4">
                                        <span class="badge bg-blue-100 text-blue-800">请假</span>
                                    </td>
                                    <td class="p-4 text-sm text-gray-500">事假，已批准</td>
                                    <td class="p-4">
                                        <div class="flex gap-2">
                                            <button class="text-primary hover:text-primary/80 text-sm" id="feedback-btn">
                                                <i class="fa fa-comment-o"></i> 反馈
                                            </button>
                                            <button class="text-warning hover:text-warning/80 text-sm hidden admin-only">
                                                <i class="fa fa-edit"></i> 编辑
                                            </button>
                                            <button class="text-danger hover:text-danger/80 text-sm hidden admin-only">
                                                <i class="fa fa-trash"></i> 删除
                                            </button>
                                        </div>
                                    </td>
                                </tr>
                                <tr class="hover:bg-gray-50 transition-colors">
                                    <td class="p-4 admin-only">
                                        <input type="checkbox" class="rounded text-primary focus:ring-primary">
                                    </td>
                                    <td class="p-4 text-sm text-gray-700">2024-05-12</td>
                                    <td class="p-4 text-sm text-gray-700">08:25:47</td>
                                    <td class="p-4">
                                        <span class="badge bg-green-100 text-green-800">已签到</span>
                                    </td>
                                    <td class="p-4 text-sm text-gray-500">正常签到</td>
                                    <td class="p-4">
                                        <div class="flex gap-2">
                                            <button class="text-primary hover:text-primary/80 text-sm" id="feedback-btn">
                                                <i class="fa fa-comment-o"></i> 反馈
                                            </button>
                                            <button class="text-warning hover:text-warning/80 text-sm hidden admin-only">
                                                <i class="fa fa-edit"></i> 编辑
                                            </button>
                                            <button class="text-danger hover:text-danger/80 text-sm hidden admin-only">
                                                <i class="fa fa-trash"></i> 删除
                                            </button>
                                        </div>
                                    </td>
                                </tr>
                                <tr class="hover:bg-gray-50 transition-colors">
                                    <td class="p-4 admin-only">
                                        <input type="checkbox" class="rounded text-primary focus:ring-primary">
                                    </td>
                                    <td class="p-4 text-sm text-gray-700">2024-05-11</td>
                                    <td class="p-4 text-sm text-gray-700">-</td>
                                    <td class="p-4">
                                        <span class="badge bg-red-100 text-red-800">缺勤</span>
                                    </td>
                                    <td class="p-4 text-sm text-gray-500">未签到，未请假</td>
                                    <td class="p-4">
                                        <div class="flex gap-2">
                                            <button class="text-primary hover:text-primary/80 text-sm" id="feedback-btn">
                                                <i class="fa fa-comment-o"></i> 反馈
                                            </button>
                                            <button class="text-warning hover:text-warning/80 text-sm hidden admin-only">
                                                <i class="fa fa-edit"></i> 编辑
                                            </button>
                                            <button class="text-danger hover:text-danger/80 text-sm hidden admin-only">
                                                <i class="fa fa-trash"></i> 删除
                                            </button>
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <!-- 分页 -->
                    <div class="p-4 border-t border-gray-100 flex justify-between items-center">
                        <p class="text-sm text-gray-500">显示 1 到 5 条，共 24 条记录</p>
                        <div class="flex gap-2">
                            <button class="btn btn-secondary w-9 h-9 p-0 justify-center opacity-50 cursor-not-allowed">
                                <i class="fa fa-angle-left"></i>
                            </button>
                            <button class="btn btn-secondary w-9 h-9 p-0 justify-center bg-primary text-white">1</button>
                            <button class="btn btn-secondary w-9 h-9 p-0 justify-center">2</button>
                            <button class="btn btn-secondary w-9 h-9 p-0 justify-center">3</button>
                            <button class="btn btn-secondary w-9 h-9 p-0 justify-center">4</button>
                            <button class="btn btn-secondary w-9 h-9 p-0 justify-center">5</button>
                            <button class="btn btn-secondary w-9 h-9 p-0 justify-center">
                                <i class="fa fa-angle-right"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 请假管理页面 -->
            <div id="leave-page" class="hidden space-y-6 page-transition">
                <div class="flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-6">
                    <div>
                        <h3 class="font-bold text-lg text-gray-700">请假管理</h3>
                        <p class="text-gray-400 text-sm">查看和管理您的请假记录</p>
                    </div>
                    <button id="apply-leave-btn" class="btn btn-primary">
                        <i class="fa fa-plus"></i> 申请请假
                    </button>
                </div>

                <!-- 请假统计 -->
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-6">
                    <div class="card p-5">
                        <div class="flex items-center gap-4">
                            <div class="w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center text-blue-600">
                                <i class="fa fa-calendar-check-o"></i>
                            </div>
                            <div>
                                <p class="text-gray-400 text-sm">已批准</p>
                                <h4 class="font-bold text-xl">2 次</h4>
                            </div>
                        </div>
                    </div>
                    <div class="card p-5">
                        <div class="flex items-center gap-4">
                            <div class="w-10 h-10 bg-yellow-100 rounded-full flex items-center justify-center text-yellow-600">
                                <i class="fa fa-clock-o"></i>
                            </div>
                            <div>
                                <p class="text-gray-400 text-sm">待审批</p>
                                <h4 class="font-bold text-xl">1 次</h4>
                            </div>
                        </div>
                    </div>
                    <div class="card p-5">
                        <div class="flex items-center gap-4">
                            <div class="w-10 h-10 bg-red-100 rounded-full flex items-center justify-center text-red-600">
                                <i class="fa fa-calendar-times-o"></i>
                            </div>
                            <div>
                                <p class="text-gray-400 text-sm">已拒绝</p>
                                <h4 class="font-bold text-xl">0 次</h4>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 请假记录表格 -->
                <div class="card">
                    <div class="overflow-x-auto">
                        <table class="w-full">
                            <thead>
                                <tr class="bg-gray-50">
                                    <th class="text-left p-4 text-xs font-medium text-gray-500 uppercase tracking-wider">
                                        <input type="checkbox" class="rounded text-primary focus:ring-primary admin-only">
                                    </th>
                                    <th class="text-left p-4 text-xs font-medium text-gray-500 uppercase tracking-wider">请假类型</th>
                                    <th class="text-left p-4 text-xs font-medium text-gray-500 uppercase tracking-wider">开始日期</th>
                                    <th class="text-left p-4 text-xs font-medium text-gray-500 uppercase tracking-wider">结束日期</th>
                                    <th class="text-left p-4 text-xs font-medium text-gray-500 uppercase tracking-wider">状态</th>
                                    <th class="text-left p-4 text-xs font-medium text-gray-500 uppercase tracking-wider">操作</th>
                                </tr>
                            </thead>
                            <tbody class="divide-y divide-gray-100">
                                <tr class="hover:bg-gray-50 transition-colors">
                                    <td class="p-4 admin-only">
                                        <input type="checkbox" class="rounded text-primary focus:ring-primary">
                                    </td>
                                    <td class="p-4 text-sm text-gray-700">事假</td>
                                    <td class="p-4 text-sm text-gray-700">2024-05-13</td>
                                    <td class="p-4 text-sm text-gray-700">2024-05-13</td>
                                    <td class="p-4">
                                        <span class="badge bg-blue-100 text-blue-800">已批准</span>
                                    </td>
                                    <td class="p-4">
                                        <div class="flex gap-2">
                                            <button class="text-primary hover:text-primary/80 text-sm">
                                                <i class="fa fa-eye"></i> 查看
                                            </button>
                                            <!-- 管理员审批按钮 -->
                                            <div class="hidden admin-only flex gap-2">
                                                <button class="text-success hover:text-success/80 text-sm">
                                                    <i class="fa fa-check"></i> 批准
                                                </button>
                                                <button class="text-danger hover:text-danger/80 text-sm">
                                                    <i class="fa fa-times"></i> 拒绝
                                                </button>
                                            </div>
                                            <!-- 未审批时学生可编辑 -->
                                            <button class="text-warning hover:text-warning/80 text-sm hidden">
                                                <i class="fa fa-edit"></i> 编辑
                                            </button>
                                        </div>
                                    </td>
                                </tr>
                                <tr class="hover:bg-gray-50 transition-colors">
                                    <td class="p-4 admin-only">
                                        <input type="checkbox" class="rounded text-primary focus:ring-primary">
                                    </td>
                                    <td class="p-4 text-sm text-gray-700">病假</td>
                                    <td class="p-4 text-sm text-gray-700">2024-04-20</td>
                                    <td class="p-4 text-sm text-gray-700">2024-04-21</td>
                                    <td class="p-4">
                                        <span class="badge bg-blue-100 text-blue-800">已批准</span>
                                    </td>
                                    <td class="p-4">
                                        <div class="flex gap-2">
                                            <button class="text-primary hover:text-primary/80 text-sm">
                                                <i class="fa fa-eye"></i> 查看
                                            </button>
                                            <div class="hidden admin-only flex gap-2">
                                                <button class="text-success hover:text-success/80 text-sm">
                                                    <i class="fa fa-check"></i> 批准
                                                </button>
                                                <button class="text-danger hover:text-danger/80 text-sm">
                                                    <i class="fa fa-times"></i> 拒绝
                                                </button>
                                            </div>
                                        </div>
                                    </td>
                                </tr>
                                <tr class="hover:bg-gray-50 transition-colors">
                                    <td class="p-4 admin-only">
                                        <input type="checkbox" class="rounded text-primary focus:ring-primary">
                                    </td>
                                    <td class="p-4 text-sm text-gray-700">事假</td>
                                    <td class="p-4 text-sm text-gray-700">2024-05-20</td>
                                    <td class="p-4 text-sm text-gray-700">2024-05-22</td>
                                    <td class="p-4">
                                        <span class="badge bg-yellow-100 text-yellow-800">待审批</span>
                                    </td>
                                    <td class="p-4">
                                        <div class="flex gap-2">
                                            <button class="text-primary hover:text-primary/80 text-sm">
                                                <i class="fa fa-eye"></i> 查看
                                            </button>
                                            <div class="hidden admin-only flex gap-2">
                                                <button class="text-success hover:text-success/80 text-sm">
                                                    <i class="fa fa-check"></i> 批准
                                                </button>
                                                <button class="text-danger hover:text-danger/80 text-sm">
                                                    <i class="fa fa-times"></i> 拒绝
                                                </button>
                                            </div>
                                            <button class="text-warning hover:text-warning/80 text-sm">
                                                <i class="fa fa-edit"></i> 编辑
                                            </button>
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <!-- 分页 -->
                    <div class="p-4 border-t border-gray-100 flex justify-between items-center">
                        <p class="text-sm text-gray-500">显示 1 到 3 条，共 3 条记录</p>
                        <div class="flex gap-2">
                            <button class="btn btn-secondary w-9 h-9 p-0 justify-center opacity-50 cursor-not-allowed">
                                <i class="fa fa-angle-left"></i>
                            </button>
                            <button class="btn btn-secondary w-9 h-9 p-0 justify-center bg-primary text-white">1</button>
                            <button class="btn btn-secondary w-9 h-9 p-0 justify-center opacity-50 cursor-not-allowed">
                                <i class="fa fa-angle-right"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 个人信息页面 -->
            <div id="profile-page" class="hidden space-y-6 page-transition">
                <div class="card">
                    <div class="p-6 border-b border-gray-100">
                        <h3 class="font-bold text-lg text-gray-700">个人信息</h3>
                        <p class="text-gray-400 text-sm mt-1">查看和编辑您的个人信息</p>
                    </div>
                    <div class="p-6">
                        <div class="flex flex-col md:flex-row gap-8">
                            <div class="md:w-1/3">
                                <div class="flex flex-col items-center">
                                    <div class="w-32 h-32 rounded-full bg-primary/10 flex items-center justify-center text-primary text-4xl font-bold mb-4">
                                        <span id="profile-avatar">T</span>
                                    </div>
                                    <button class="btn btn-secondary">
                                        <i class="fa fa-upload"></i> 更换头像
                                    </button>
                                </div>
                            </div>
                            <div class="md:w-2/3 space-y-6">
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                    <div class="space-y-2">
                                        <label class="block text-sm font-medium text-gray-500">姓名</label>
                                        <input type="text" id="profile-name" value="Tom" class="form-input">
                                    </div>
                                    <div class="space-y-2">
                                        <label class="block text-sm font-medium text-gray-500">学号/管理员ID</label>
                                        <input type="text" id="profile-id" value="2023001001" class="form-input" readonly>
                                    </div>
                                    <div class="space-y-2">
                                        <label class="block text-sm font-medium text-gray-500">性别</label>
                                        <select class="form-input">
                                            <option value="male" selected>男</option>
                                            <option value="female">女</option>
                                            <option value="other">其他</option>
                                        </select>
                                    </div>
                                    <div class="space-y-2">
                                        <label class="block text-sm font-medium text-gray-500">年龄</label>
                                        <input type="number" value="18" class="form-input">
                                    </div>
                                    <div class="space-y-2">
                                        <label class="block text-sm font-medium text-gray-500">联系电话</label>
                                        <input type="tel" value="13800138000" class="form-input">
                                    </div>
                                    <div class="space-y-2">
                                        <label class="block text-sm font-medium text-gray-500">邮箱</label>
                                        <input type="email" value="tom@example.com" class="form-input">
                                    </div>
                                </div>

                                <div class="space-y-2">
                                    <label class="block text-sm font-medium text-gray-500">班级/部门</label>
                                    <input type="text" value="计算机科学与技术一班" class="form-input">
                                </div>

                                <div class="space-y-2">
                                    <label class="block text-sm font-medium text-gray-500">个人简介</label>
                                    <textarea rows="4" class="form-input" placeholder="请输入个人简介">热爱学习，积极向上，喜欢编程和运动。</textarea>
                                </div>

                                <div class="flex justify-end gap-3 pt-4">
                                    <button class="btn btn-secondary">
                                        <i class="fa fa-refresh"></i> 重置
                                    </button>
                                    <button class="btn btn-primary">
                                        <i class="fa fa-save"></i> 保存修改
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 密码修改 -->
                <div class="card">
                    <div class="p-6 border-b border-gray-100">
                        <h3 class="font-bold text-lg text-gray-700">密码修改</h3>
                        <p class="text-gray-400 text-sm mt-1">修改您的登录密码</p>
                    </div>
                    <div class="p-6 max-w-2xl">
                        <div class="space-y-4">
                            <div class="space-y-2">
                                <label for="current-password" class="block text-sm font-medium text-gray-500">当前密码</label>
                                <input type="password" id="current-password" class="form-input">
                            </div>
                            <div class="space-y-2">
                                <label for="new-password" class="block text-sm font-medium text-gray-500">新密码</label>
                                <input type="password" id="new-password" class="form-input">
                                <p class="text-xs text-gray-400">密码长度至少8位，包含字母和数字</p>
                            </div>
                            <div class="space-y-2">
                                <label for="confirm-password" class="block text-sm font-medium text-gray-500">确认新密码</label>
                                <input type="password" id="confirm-password" class="form-input">
                            </div>
                            <div class="flex justify-end pt-4">
                                <button class="btn btn-primary">
                                    <i class="fa fa-key"></i> 确认修改
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 意见反馈页面 -->
            <div id="feedback-page" class="hidden space-y-6 page-transition">
                <div class="card">
                    <div class="p-6 border-b border-gray-100">
                        <h3 class="font-bold text-lg text-gray-700">意见反馈</h3>
                        <p class="text-gray-400 text-sm mt-1">提交您对系统的意见和建议</p>
                    </div>
                    <div class="p-6">
                        <form id="feedback-form" class="space-y-4">
                            <div class="space-y-2">
                                <label for="feedback-type" class="block text-sm font-medium text-gray-500">反馈类型</label>
                                <select id="feedback-type" class="form-input">
                                    <option value="suggestion">功能建议</option>
                                    <option value="bug">bug反馈</option>
                                    <option value="experience">体验优化</option>
                                    <option value="other">其他问题</option>
                                </select>
                            </div>
                            <div class="space-y-2">
                                <label for="feedback-title" class="block text-sm font-medium text-gray-500">标题</label>
                                <input type="text" id="feedback-title" placeholder="请输入反馈标题" class="form-input">
                            </div>
                            <div class="space-y-2">
                                <label for="feedback-content" class="block text-sm font-medium text-gray-500">反馈内容</label>
                                <textarea id="feedback-content" rows="6" placeholder="请详细描述您的意见或建议..." class="form-input"></textarea>
                            </div>
                            <div class="space-y-2">
                                <label class="block text-sm font-medium text-gray-500">上传图片（可选）</label>
                                <div class="border-2 border-dashed border-gray-200 rounded-lg p-6 text-center hover:bg-gray-50 transition-colors cursor-pointer">
                                    <input type="file" multiple class="hidden" id="feedback-images">
                                    <label for="feedback-images" class="cursor-pointer">
                                        <div class="w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-2">
                                            <i class="fa fa-cloud-upload text-gray-400"></i>
                                        </div>
                                        <p class="text-sm text-gray-500">点击或拖拽文件到此处上传</p>
                                        <p class="text-xs text-gray-400 mt-1">支持JPG、PNG格式，最多3张</p>
                                    </label>
                                </div>
                            </div>
                            <div class="flex justify-end pt-4">
                                <button type="reset" class="btn btn-secondary mr-3">
                                    <i class="fa fa-refresh"></i> 重置
                                </button>
                                <button type="submit" class="btn btn-primary">
                                    <i class="fa fa-paper-plane"></i> 提交反馈
                                </button>
                            </div>
                        </form>
                    </div>
                </div>

                <!-- 我的反馈记录 -->
                <div class="card">
                    <div class="p-6 border-b border-gray-100">
                        <h3 class="font-bold text-lg text-gray-700">我的反馈记录</h3>
                    </div>
                    <div class="overflow-x-auto">
                        <table class="w-full">
                            <thead>
                                <tr class="bg-gray-50">
                                    <th class="text-left p-4 text-xs font-medium text-gray-500 uppercase tracking-wider">标题</th>
                                    <th class="text-left p-4 text-xs font-medium text-gray-500 uppercase tracking-wider">类型</th>
                                    <th class="text-left p-4 text-xs font-medium text-gray-500 uppercase tracking-wider">提交时间</th>
                                    <th class="text-left p-4 text-xs font-medium text-gray-500 uppercase tracking-wider">状态</th>
                                    <th class="text-left p-4 text-xs font-medium text-gray-500 uppercase tracking-wider">操作</th>
                                </tr>
                            </thead>
                            <tbody class="divide-y divide-gray-100">
                                <tr class="hover:bg-gray-50 transition-colors">
                                    <td class="p-4 text-sm text-gray-700">建议增加课程表功能</td>
                                    <td class="p-4 text-sm text-gray-700">功能建议</td>
                                    <td class="p-4 text-sm text-gray-700">2024-05-10 14:30</td>
                                    <td class="p-4">
                                        <span class="badge bg-blue-100 text-blue-800">已回复</span>
                                    </td>
                                    <td class="p-4">
                                        <button class="text-primary hover:text-primary/80 text-sm">
                                            <i class="fa fa-eye"></i> 查看详情
                                        </button>
                                    </td>
                                </tr>
                                <tr class="hover:bg-gray-50 transition-colors">
                                    <td class="p-4 text-sm text-gray-700">签到按钮点击无反应</td>
                                    <td class="p-4 text-sm text-gray-700">bug反馈</td>
                                    <td class="p-4 text-sm text-gray-700">2024-05-05 09:15</td>
                                    <td class="p-4">
                                        <span class="badge bg-green-100 text-green-800">已解决</span>
                                    </td>
                                    <td class="p-4">
                                        <button class="text-primary hover:text-primary/80 text-sm">
                                            <i class="fa fa-eye"></i> 查看详情
                                        </button>
                                    </td>
                                </tr>
                                <tr class="hover:bg-gray-50 transition-colors">
                                    <td class="p-4 text-sm text-gray-700">移动端适配问题</td>
                                    <td class="p-4 text-sm text-gray-700">体验优化</td>
                                    <td class="p-4 text-sm text-gray-700">2024-05-15 16:45</td>
                                    <td class="p-4">
                                        <span class="badge bg-yellow-100 text-yellow-800">处理中</span>
                                    </td>
                                    <td class="p-4">
                                        <button class="text-primary hover:text-primary/80 text-sm">
                                            <i class="fa fa-eye"></i> 查看详情
                                        </button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- 管理员：成员管理页面 -->
            <div id="members-page" class="hidden space-y-6 page-transition">
                <div class="flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-6">
                    <div>
                        <h3 class="font-bold text-lg text-gray-700">成员管理</h3>
                        <p class="text-gray-400 text-sm">管理系统中的所有成员</p>
                    </div>
                    <div class="flex gap-3">
                        <button class="btn btn-secondary">
                            <i class="fa fa-search"></i> 搜索成员
                        </button>
                        <button class="btn btn-primary">
                            <i class="fa fa-plus"></i> 添加成员
                        </button>
                    </div>
                </div>

                <!-- 成员统计 -->
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                    <div class="card p-5">
                        <div class="flex items-center gap-4">
                            <div class="w-10 h-10 bg-primary/10 rounded-full flex items-center justify-center text-primary">
                                <i class="fa fa-users"></i>
                            </div>
                            <div>
                                <p class="text-gray-400 text-sm">总成员数</p>
                                <h4 class="font-bold text-xl">128 人</h4>
                            </div>
                        </div>
                    </div>
                    <div class="card p-5">
                        <div class="flex items-center gap-4">
                            <div class="w-10 h-10 bg-warning/10 rounded-full flex items-center justify-center text-warning">
                                <i class="fa fa-user-circle-o"></i>
                            </div>
                            <div>
                                <p class="text-gray-400 text-sm">管理员数</p>
                                <h4 class="font-bold text-xl">3 人</h4>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 成员列表 -->
                <div class="card">
                    <div class="overflow-x-auto">
                        <table class="w-full">
                            <thead>
                                <tr class="bg-gray-50">
                                    <th class="text-left p-4 text-xs font-medium text-gray-500 uppercase tracking-wider">
                                        <input type="checkbox" class="rounded text-primary focus:ring-primary">
                                    </th>
                                    <th class="text-left p-4 text-xs font-medium text-gray-500 uppercase tracking-wider">姓名</th>
                                    <th class="text-left p-4 text-xs font-medium text-gray-500 uppercase tracking-wider">学号/ID</th>
                                    <th class="text-left p-4 text-xs font-medium text-gray-500 uppercase tracking-wider">班级/部门</th>
                                    <th class="text-left p-4 text-xs font-medium text-gray-500 uppercase tracking-wider">角色</th>
                                    <th class="text-left p-4 text-xs font-medium text-gray-500 uppercase tracking-wider">状态</th>
                                    <th class="text-left p-4 text-xs font-medium text-gray-500 uppercase tracking-wider">操作</th>
                                </tr>
                            </thead>
                            <tbody class="divide-y divide-gray-100">
                                <tr class="hover:bg-gray-50 transition-colors">
                                    <td class="p-4">
                                        <input type="checkbox" class="rounded text-primary focus:ring-primary">
                                    </td>
                                    <td class="p-4 text-sm text-gray-700">Tom</td>
                                    <td class="p-4 text-sm text-gray-700">2023001001</td>
                                    <td class="p-4 text-sm text-gray-700">计算机科学与技术一班</td>
                                    <td class="p-4 text-sm text-gray-700">学生</td>
                                    <td class="p-4">
                                        <span class="badge bg-green-100 text-green-800">正常</span>
                                    </td>
                                    <td class="p-4">
                                        <div class="flex gap-2">
                                            <button class="text-primary hover:text-primary/80 text-sm">
                                                <i class="fa fa-eye"></i> 查看
                                            </button>
                                            <button class="text-warning hover:text-warning/80 text-sm">
                                                <i class="fa fa-edit"></i> 编辑
                                            </button>
                                            <button class="text-danger hover:text-danger/80 text-sm">
                                                <i class="fa fa-trash"></i> 删除
                                            </button>
                                        </div>
                                    </td>
                                </tr>
                                <tr class="hover:bg-gray-50 transition-colors">
                                    <td class="p-4">
                                        <input type="checkbox" class="rounded text-primary focus:ring-primary">
                                    </td>
                                    <td class="p-4 text-sm text-gray-700">Jerry</td>
                                    <td class="p-4 text-sm text-gray-700">2023001002</td>
                                    <td class="p-4 text-sm text-gray-700">计算机科学与技术一班</td>
                                    <td class="p-4 text-sm text-gray-700">学生</td>
                                    <td class="p-4">
                                        <span class="badge bg-green-100 text-green-800">正常</span>
                                    </td>
                                    <td class="p-4">
                                        <div class="flex gap-2">
                                            <button class="text-primary hover:text-primary/80 text-sm">
                                                <i class="fa fa-eye"></i> 查看
                                            </button>
                                            <button class="text-warning hover:text-warning/80 text-sm">
                                                <i class="fa fa-edit"></i> 编辑
                                            </button>
                                            <button class="text-danger hover:text-danger/80 text-sm">
                                                <i class="fa fa-trash"></i> 删除
                                            </button>
                                        </div>
                                    </td>
                                </tr>
                                <tr class="hover:bg-gray-50 transition-colors">
                                    <td class="p-4">
                                        <input type="checkbox" class="rounded text-primary focus:ring-primary">
                                    </td>
                                    <td class="p-4 text-sm text-gray-700">Admin</td>
                                    <td class="p-4 text-sm text-gray-700">admin001</td>
                                    <td class="p-4 text-sm text-gray-700">教务处</td>
                                    <td class="p-4 text-sm text-gray-700">管理员</td>
                                    <td class="p-4">
                                        <span class="badge bg-green-100 text-green-800">正常</span>
                                    </td>
                                    <td class="p-4">
                                        <div class="flex gap-2">
                                            <button class="text-primary hover:text-primary/80 text-sm">
                                                <i class="fa fa-eye"></i> 查看
                                            </button>
                                            <button class="text-warning hover:text-warning/80 text-sm">
                                                <i class="fa fa-edit"></i> 编辑
                                            </button>
                                            <button class="text-danger hover:text-danger/80 text-sm opacity-50 cursor-not-allowed">
                                                <i class="fa fa-trash"></i> 删除
                                            </button>
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <!-- 分页 -->
                    <div class="p-4 border-t border-gray-100 flex justify-between items-center">
                        <p class="text-sm text-gray-500">显示 1 到 3 条，共 128 条记录</p>
                        <div class="flex gap-2">
                            <button class="btn btn-secondary w-9 h-9 p-0 justify-center opacity-50 cursor-not-allowed">
                                <i class="fa fa-angle-left"></i>
                            </button>
                            <button class="btn btn-secondary w-9 h-9 p-0 justify-center bg-primary text-white">1</button>
                            <button class="btn btn-secondary w-9 h-9 p-0 justify-center">2</button>
                            <button class="btn btn-secondary w-9 h-9 p-0 justify-center">3</button>
                            <button class="btn btn-secondary w-9 h-9 p-0 justify-center">4</button>
                            <button class="btn btn-secondary w-9 h-9 p-0 justify-center">5</button>
                            <button class="btn btn-secondary w-9 h-9 p-0 justify-center">
                                <i class="fa fa-angle-right"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 管理员：通知管理页面 -->
            <div id="notifications-page" class="hidden space-y-6 page-transition">
                <div class="flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-6">
                    <div>
                        <h3 class="font-bold text-lg text-gray-700">通知管理</h3>
                        <p class="text-gray-400 text-sm mt-1">发布和管理系统通知</p>
                    </div>
                    <button class="btn btn-primary">
                        <i class="fa fa-plus"></i> 发布新通知
                    </button>
                </div>

                <!-- 通知列表 -->
                <div class="card">
                    <div class="overflow-x-auto">
                        <table class="w-full">
                            <thead>
                                <tr class="bg-gray-50">
                                    <th class="text-left p-4 text-xs font-medium text-gray-500 uppercase tracking-wider">
                                        <input type="checkbox" class="rounded text-primary focus:ring-primary">
                                    </th>
                                    <th class="text-left p-4 text-xs font-medium text-gray-500 uppercase tracking-wider">标题</th>
                                    <th class="text-left p-4 text-xs font-medium text-gray-500 uppercase tracking-wider">发布人</th>
                                    <th class="text-left p-4 text-xs font-medium text-gray-500 uppercase tracking-wider">发布时间</th>
                                    <th class="text-left p-4 text-xs font-medium text-gray-500 uppercase tracking-wider">状态</th>
                                    <th class="text-left p-4 text-xs font-medium text-gray-500 uppercase tracking-wider">操作</th>
                                </tr>
                            </thead>
                            <tbody class="divide-y divide-gray-100">
                                <tr class="hover:bg-gray-50 transition-colors">
                                    <td class="p-4">
                                        <input type="checkbox" class="rounded text-primary focus:ring-primary">
                                    </td>
                                    <td class="p-4 text-sm text-gray-700">期中考试安排通知</td>
                                    <td class="p-4 text-sm text-gray-700">Admin</td>
                                    <td class="p-4 text-sm text-gray-700">2024-05-10 09:30</td>
                                    <td class="p-4">
                                        <span class="badge bg-green-100 text-green-800">已发布</span>
                                    </td>
                                    <td class="p-4">
                                        <div class="flex gap-2">
                                            <button class="text-primary hover:text-primary/80 text-sm">
                                                <i class="fa fa-eye"></i> 查看
                                            </button>
                                            <button class="text-warning hover:text-warning/80 text-sm">
                                                <i class="fa fa-edit"></i> 编辑
                                            </button>
                                            <button class="text-danger hover:text-danger/80 text-sm">
                                                <i class="fa fa-trash"></i> 删除
                                            </button>
                                        </div>
                                    </td>
                                </tr>
                                <tr class="hover:bg-gray-50 transition-colors">
                                    <td class="p-4">
                                        <input type="checkbox" class="rounded text-primary focus:ring-primary">
                                    </td>
                                    <td class="p-4 text-sm text-gray-700">五一假期调课通知</td>
                                    <td class="p-4 text-sm text-gray-700">Admin</td>
                                    <td class="p-4 text-sm text-gray-700">2024-04-28 14:15</td>
                                    <td class="p-4">
                                        <span class="badge bg-green-100 text-green-800">已发布</span>
                                    </td>
                                    <td class="p-4">
                                        <div class="flex gap-2">
                                            <button class="text-primary hover:text-primary/80 text-sm">
                                                <i class="fa fa-eye"></i> 查看
                                            </button>
                                            <button class="text-warning hover:text-warning/80 text-sm">
                                                <i class="fa fa-edit"></i> 编辑
                                            </button>
                                            <button class="text-danger hover:text-danger/80 text-sm">
                                                <i class="fa fa-trash"></i> 删除
                                            </button>
                                        </div>
                                    </td>
                                </tr>
                                <tr class="hover:bg-gray-50 transition-colors">
                                    <td class="p-4">
                                        <input type="checkbox" class="rounded text-primary focus:ring-primary">
                                    </td>
                                    <td class="p-4 text-sm text-gray-700">校园安全检查通知</td>
                                    <td class="p-4 text-sm text-gray-700">Admin</td>
                                    <td class="p-4 text-sm text-gray-700">2024-04-25 16:40</td>
                                    <td class="p-4">
                                        <span class="badge bg-green-100 text-green-800">已发布</span>
                                    </td>
                                    <td class="p-4">
                                        <div class="flex gap-2">
                                            <button class="text-primary hover:text-primary/80 text-sm">
                                                <i class="fa fa-eye"></i> 查看
                                            </button>
                                            <button class="text-warning hover:text-warning/80 text-sm">
                                                <i class="fa fa-edit"></i> 编辑
                                            </button>
                                            <button class="text-danger hover:text-danger/80 text-sm">
                                                <i class="fa fa-trash"></i> 删除
                                            </button>
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <!-- 分页 -->
                    <div class="p-4 border-t border-gray-100 flex justify-between items-center">
                        <p class="text-sm text-gray-500">显示 1 到 3 条，共 15 条记录</p>
                        <div class="flex gap-2">
                            <button class="btn btn-secondary w-9 h-9 p-0 justify-center opacity-50 cursor-not-allowed">
                                <i class="fa fa-angle-left"></i>
                            </button>
                            <button class="btn btn-secondary w-9 h-9 p-0 justify-center bg-primary text-white">1</button>
                            <button class="btn btn-secondary w-9 h-9 p-0 justify-center">2</button>
                            <button class="btn btn-secondary w-9 h-9 p-0 justify-center">3</button>
                            <button class="btn btn-secondary w-9 h-9 p-0 justify-center">
                                <i class="fa fa-angle-right"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 管理员：反馈管理页面 -->
            <div id="manage-feedbacks-page" class="hidden space-y-6 page-transition">
                <div class="flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-6">
                    <div>
                        <h3 class="font-bold text-lg text-gray-700">反馈管理</h3>
                        <p class="text-gray-400 text-sm mt-1">查看和处理用户反馈</p>
                    </div>
                    <div class="flex gap-3">
                        <div class="relative">
                            <i class="fa fa-search absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"></i>
                            <input type="text" placeholder="搜索反馈内容" class="form-input pl-10">
                        </div>
                        <select class="form-input">
                            <option value="">全部状态</option>
                            <option value="pending">未处理</option>
                            <option value="processing">处理中</option>
                            <option value="replied">已回复</option>
                            <option value="solved">已解决</option>
                        </select>
                    </div>
                </div>

                <!-- 反馈列表 -->
                <div class="card">
                    <div class="overflow-x-auto">
                        <table class="w-full">
                            <thead>
                                <tr class="bg-gray-50">
                                    <th class="text-left p-4 text-xs font-medium text-gray-500 uppercase tracking-wider">
                                        <input type="checkbox" class="rounded text-primary focus:ring-primary">
                                    </th>
                                    <th class="text-left p-4 text-xs font-medium text-gray-500 uppercase tracking-wider">提交人</th>
                                    <th class="text-left p-4 text-xs font-medium text-gray-500 uppercase tracking-wider">标题</th>
                                    <th class="text-left p-4 text-xs font-medium text-gray-500 uppercase tracking-wider">类型</th>
                                    <th class="text-left p-4 text-xs font-medium text-gray-500 uppercase tracking-wider">提交时间</th>
                                    <th class="text-left p-4 text-xs font-medium text-gray-500 uppercase tracking-wider">状态</th>
                                    <th class="text-left p-4 text-xs font-medium text-gray-500 uppercase tracking-wider">操作</th>
                                </tr>
                            </thead>
                            <tbody class="divide-y divide-gray-100">
                                <tr class="hover:bg-gray-50 transition-colors">
                                    <td class="p-4">
                                        <input type="checkbox" class="rounded text-primary focus:ring-primary">
                                    </td>
                                    <td class="p-4 text-sm text-gray-700">Tom (2023001001)</td>
                                    <td class="p-4 text-sm text-gray-700">建议增加课程表功能</td>
                                    <td class="p-4 text-sm text-gray-700">功能建议</td>
                                    <td class="p-4 text-sm text-gray-700">2024-05-10 14:30</td>
                                    <td class="p-4">
                                        <span class="badge bg-blue-100 text-blue-800">已回复</span>
                                    </td>
                                    <td class="p-4">
                                        <div class="flex gap-2">
                                            <button class="text-primary hover:text-primary/80 text-sm">
                                                <i class="fa fa-eye"></i> 查看详情
                                            </button>
                                            <button class="text-warning hover:text-warning/80 text-sm">
                                                <i class="fa fa-reply"></i> 回复
                                            </button>
                                        </div>
                                    </td>
                                </tr>
                                <tr class="hover:bg-gray-50 transition-colors">
                                    <td class="p-4">
                                        <input type="checkbox" class="rounded text-primary focus:ring-primary">
                                    </td>
                                    <td class="p-4 text-sm text-gray-700">Jerry (2023001002)</td>
                                    <td class="p-4 text-sm text-gray-700">签到按钮点击无反应</td>
                                    <td class="p-4 text-sm text-gray-700">bug反馈</td>
                                    <td class="p-4 text-sm text-gray-700">2024-05-05 09:15</td>
                                    <td class="p-4">
                                        <span class="badge bg-green-100 text-green-800">已解决</span>
                                    </td>
                                    <td class="p-4">
                                        <div class="flex gap-2">
                                            <button class="text-primary hover:text-primary/80 text-sm">
                                                <i class="fa fa-eye"></i> 查看详情
                                            </button>
                                            <button class="text-warning hover:text-warning/80 text-sm">
                                                <i class="fa fa-reply"></i> 回复
                                            </button>
                                        </div>
                                    </td>
                                </tr>
                                <tr class="hover:bg-gray-50 transition-colors">
                                    <td class="p-4">
                                        <input type="checkbox" class="rounded text-primary focus:ring-primary">
                                    </td>
                                    <td class="p-4 text-sm text-gray-700">Alice (2023001003)</td>
                                    <td class="p-4 text-sm text-gray-700">移动端适配问题</td>
                                    <td class="p-4 text-sm text-gray-700">体验优化</td>
                                    <td class="p-4 text-sm text-gray-700">2024-05-15 16:45</td>
                                    <td class="p-4">
                                        <span class="badge bg-yellow-100 text-yellow-800">处理中</span>
                                    </td>
                                    <td class="p-4">
                                        <div class="flex gap-2">
                                            <button class="text-primary hover:text-primary/80 text-sm">
                                                <i class="fa fa-eye"></i> 查看详情
                                            </button>
                                            <button class="text-warning hover:text-warning/80 text-sm">
                                                <i class="fa fa-reply"></i> 回复
                                            </button>
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <!-- 分页 -->
                    <div class="p-4 border-t border-gray-100 flex justify-between items-center">
                        <p class="text-sm text-gray-500">显示 1 到 3 条，共 28 条记录</p>
                        <div class="flex gap-2">
                            <button class="btn btn-secondary w-9 h-9 p-0 justify-center opacity-50 cursor-not-allowed">
                                <i class="fa fa-angle-left"></i>
                            </button>
                            <button class="btn btn-secondary w-9 h-9 p-0 justify-center bg-primary text-white">1</button>
                            <button class="btn btn-secondary w-9 h-9 p-0 justify-center">2</button>
                            <button class="btn btn-secondary w-9 h-9 p-0 justify-center">3</button>
                            <button class="btn btn-secondary w-9 h-9 p-0 justify-center">
                                <i class="fa fa-angle-right"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- 模态框 - 请假申请 -->
    <div id="leave-modal" class="fixed inset-0 bg-black/50 flex items-center justify-center z-50 hidden">
        <div class="card w-full max-w-md">
            <div class="p-6 border-b border-gray-100 flex justify-between items-center">
                <h3 class="font-bold text-lg text-gray-700">请假申请</h3>
                <button id="close-leave-modal" class="text-gray-400 hover:text-gray-600">
                    <i class="fa fa-times"></i>
                </button>
            </div>
            <div class="p-6">
                <form id="leave-form" class="space-y-4">
                    <div class="space-y-2">
                        <label for="leave-type" class="block text-sm font-medium text-gray-500">请假类型</label>
                        <select id="leave-type" class="form-input">
                            <option value="personal">事假</option>
                            <option value="sick">病假</option>
                            <option value="other">其他</option>
                        </select>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div class="space-y-2">
                            <label for="leave-start" class="block text-sm font-medium text-gray-500">开始日期</label>
                            <input type="date" id="leave-start" class="form-input">
                        </div>
                        <div class="space-y-2">
                            <label for="leave-end" class="block text-sm font-medium text-gray-500">结束日期</label>
                            <input type="date" id="leave-end" class="form-input">
                        </div>
                    </div>
                    <div class="space-y-2">
                        <label for="leave-reason" class="block text-sm font-medium text-gray-500">请假原因</label>
                        <textarea id="leave-reason" rows="4" placeholder="请详细说明请假原因..." class="form-input"></textarea>
                    </div>
                    <div class="space-y-2">
                        <label class="block text-sm font-medium text-gray-500">上传证明（可选）</label>
                        <div class="border-2 border-dashed border-gray-200 rounded-lg p-4 text-center hover:bg-gray-50 transition-colors cursor-pointer">
                            <input type="file" class="hidden" id="leave-proof">
                            <label for="leave-proof" class="cursor-pointer">
                                <i class="fa fa-cloud-upload text-gray-400"></i>
                                <span class="text-sm text-gray-500 ml-1">点击上传证明文件</span>
                            </label>
                        </div>
                    </div>
                    <div class="flex justify-end gap-3 pt-4">
                        <button type="button" id="cancel-leave" class="btn btn-secondary">
                            取消
                        </button>
                        <button type="submit" class="btn btn-primary">
                            <i class="fa fa-paper-plane"></i> 提交申请
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script>
        // 全局变量
        let currentUserRole = 'student'; // 默认学生角色
        
        // DOM元素加载完成后执行
        document.addEventListener('DOMContentLoaded', function() {
            // 初始化图表
            initCharts();
            
            // 登录相关事件
            document.getElementById('login-btn').addEventListener('click', login);
            document.getElementById('register-btn').addEventListener('click', register);
            document.getElementById('go-to-register').addEventListener('click', goToRegister);
            document.getElementById('go-to-login').addEventListener('click', goToLogin);
            document.getElementById('logout-btn').addEventListener('click', logout);
            
            // 用户类型切换事件
            document.querySelectorAll('input[name="user-type"]').forEach(radio => {
                radio.addEventListener('change', function() {
                    if (this.value === 'admin') {
                        document.getElementById('admin-key-field').classList.remove('hidden');
                    } else {
                        document.getElementById('admin-key-field').classList.add('hidden');
                    }
                });
            });
            
            document.querySelectorAll('input[name="register-type"]').forEach(radio => {
                radio.addEventListener('change', function() {
                    if (this.value === 'admin') {
                        document.getElementById('student-fields').classList.add('hidden');
                        document.getElementById('admin-fields').classList.remove('hidden');
                    } else {
                        document.getElementById('student-fields').classList.remove('hidden');
                        document.getElementById('admin-fields').classList.add('hidden');
                    }
                });
            });
            
            // 侧边栏导航事件
            document.querySelectorAll('.sidebar-item').forEach(item => {
                item.addEventListener('click', function(e) {
                    e.preventDefault();
                    const page = this.getAttribute('data-page');
                    navigateToPage(page);
                });
            });
            
            // 请假申请相关事件
            document.getElementById('apply-leave-btn').addEventListener('click', function() {
                document.getElementById('leave-modal').classList.remove('hidden');
            });
            
            document.getElementById('close-leave-modal').addEventListener('click', closeLeaveModal);
            document.getElementById('cancel-leave').addEventListener('click', closeLeaveModal);
            document.getElementById('leave-form').addEventListener('submit', function(e) {
                e.preventDefault();
                submitLeaveApplication();
            });
            
            // 签到按钮事件
            document.getElementById('check-in-btn').addEventListener('click', checkIn);
        });
        
        // 初始化图表
        function initCharts() {
            // 考勤趋势图表
            const attendanceCtx = document.getElementById('attendance-chart').getContext('2d');
            new Chart(attendanceCtx, {
                type: 'line',
                data: {
                    labels: ['第1周', '第2周', '第3周', '第4周', '第5周', '第6周', '第7周', '第8周'],
                    datasets: [{
                        label: '签到次数',
                        data: [4, 5, 3, 5, 4, 5, 4, 5],
                        borderColor: '#165DFF',
                        backgroundColor: 'rgba(22, 93, 255, 0.1)',
                        tension: 0.3,
                        fill: true
                    }, {
                        label: '请假次数',
                        data: [0, 1, 0, 0, 1, 0, 0, 0],
                        borderColor: '#FF7D00',
                        backgroundColor: 'rgba(255, 125, 0, 0.1)',
                        tension: 0.3,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'top',
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                precision: 0
                            }
                        }
                    }
                }
            });
            
            // 考勤状态分布图表
            const statusCtx = document.getElementById('status-chart').getContext('2d');
            new Chart(statusCtx, {
                type: 'doughnut',
                data: {
                    labels: ['已签到', '迟到', '缺勤', '请假'],
                    datasets: [{
                        data: [22, 3, 1, 2],
                        backgroundColor: [
                            '#00B42A',
                            '#FF7D00',
                            '#F53F3F',
                            '#165DFF'
                        ],
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                        }
                    },
                    cutout: '70%'
                }
            });
        }
        
        // 页面导航
        function navigateToPage(page) {
            // 隐藏所有页面
            document.querySelectorAll('[id$="-page"]').forEach(el => {
                if (el.id !== 'login-page' && el.id !== 'register-page') {
                    el.classList.add('hidden');
                }
            });
            
            // 显示目标页面
            document.getElementById(`${page}-page`).classList.remove('hidden');
            
            // 更新页面标题
            document.getElementById('page-title').textContent = getPageTitle(page);
            
            // 更新侧边栏选中状态
            document.querySelectorAll('.sidebar-item').forEach(item => {
                item.classList.remove('active');
                if (item.getAttribute('data-page') === page) {
                    item.classList.add('active');
                }
            });
        }
        
        // 获取页面标题
        function getPageTitle(page) {
            const titles = {
                'dashboard': '首页',
                'attendance': '考勤管理',
                'leave': '请假管理',
                'profile': '个人信息',
                'feedback': '意见反馈',
                'members': '成员管理',
                'notifications': '通知管理',
                'manage-feedbacks': '反馈管理'
            };
            return titles[page] || '首页';
        }
        
        // 登录功能
        function login() {
            const userId = document.getElementById('login-id').value;
            const password = document.getElementById('login-password').value;
            const userType = document.querySelector('input[name="user-type"]:checked').value;
            
            // 简单验证
            if (!userId || !password) {
                alert('请输入账号和密码');
                return;
            }
            
            // 管理员额外验证
            if (userType === 'admin') {
                const adminKey = document.getElementById('admin-key').value;
                if (!adminKey) {
                    alert('请输入管理员密钥');
                    return;
                }
                currentUserRole = 'admin';
            } else {
                currentUserRole = 'student';
            }
            
            // 更新用户信息
            document.getElementById('sidebar-username').textContent = userId;
            document.getElementById('sidebar-role').textContent = currentUserRole === 'admin' ? '管理员' : '普通学生';
            document.getElementById('user-avatar').textContent = userId.charAt(0).toUpperCase();
            document.getElementById('profile-avatar').textContent = userId.charAt(0).toUpperCase();
            document.getElementById('profile-name').value = userId;
            document.getElementById('profile-id').value = userId;
            
            // 根据角色显示/隐藏相关功能
            updateRoleBasedUI();
            
            // 切换到主系统界面
            document.getElementById('login-page').classList.add('hidden');
            document.getElementById('main-system').classList.remove('hidden');
            
            // 导航到首页
            navigateToPage('dashboard');
        }
        
        // 注册功能
        function register() {
            const userType = document.querySelector('input[name="register-type"]:checked').value;
            const password = document.getElementById('register-password').value;
            const confirmPassword = document.getElementById('register-confirm-password').value;
            
            // 验证密码
            if (password !== confirmPassword) {
                alert('两次输入的密码不一致');
                return;
            }
            
            if (password.length < 8) {
                alert('密码长度至少为8位');
                return;
            }
            
            // 学生注册验证
            if (userType === 'student') {
                const studentId = document.getElementById('register-student-id').value;
                const name = document.getElementById('register-name').value;
                
                if (!studentId || !name) {
                    alert('请填写完整的学生信息');
                    return;
                }
            } else {
                // 管理员注册验证
                const adminId = document.getElementById('register-admin-id').value;
                const adminKey = document.getElementById('register-admin-key').value;
                
                if (!adminId || !adminKey) {
                    alert('请填写完整的管理员信息');
                    return;
                }
            }
            
            alert('注册成功，请登录');
            goToLogin();
        }
        
        // 切换到注册页面
        function goToRegister() {
            document.getElementById('login-page').classList.add('hidden');
            document.getElementById('register-page').classList.remove('hidden');
        }
        
        // 切换到登录页面
        function goToLogin() {
            document.getElementById('register-page').classList.add('hidden');
            document.getElementById('login-page').classList.remove('hidden');
        }
        
        // 退出登录
        function logout() {
            if (confirm('确定要退出登录吗？')) {
                document.getElementById('main-system').classList.add('hidden');
                document.getElementById('login-page').classList.remove('hidden');
                document.getElementById('login-id').value = '';
                document.getElementById('login-password').value = '';
                document.getElementById('admin-key').value = '';
                document.querySelector('input[name="user-type"][value="student"]').checked = true;
                document.getElementById('admin-key-field').classList.add('hidden');
            }
        }
        
        // 关闭请假模态框
        function closeLeaveModal() {
            document.getElementById('leave-modal').classList.add('hidden');
        }
        
        // 提交请假申请
        function submitLeaveApplication() {
            const leaveType = document.getElementById('leave-type').value;
            const startDate = document.getElementById('leave-start').value;
            const endDate = document.getElementById('leave-end').value;
            const reason = document.getElementById('leave-reason').value;
            
            if (!startDate || !endDate || !reason) {
                alert('请填写完整的请假信息');
                return;
            }
            
            if (new Date(startDate) > new Date(endDate)) {
                alert('开始日期不能晚于结束日期');
                return;
            }
            
            alert('请假申请已提交，等待审批');
            closeLeaveModal();
            document.getElementById('leave-form').reset();
            navigateToPage('leave');
        }
        
        // 签到功能
        function checkIn() {
            const now = new Date();
            const hours = now.getHours();
            
            let message = `签到成功！当前时间：${now.toLocaleString()}`;
            let status = '已签到';
            
            // 判断是否迟到（假设8:30前为正常签到）
            if (hours > 8 || (hours === 8 && now.getMinutes() > 30)) {
                message = `签到成功，但已迟到！当前时间：${now.toLocaleString()}`;
                status = '迟到';
            }
            
            alert(message);
            navigateToPage('attendance');
        }
        
        // 根据角色更新UI
        function updateRoleBasedUI() {
            if (currentUserRole === 'admin') {
                // 显示管理员菜单
                document.getElementById('admin-menu-members').classList.remove('hidden');
                document.getElementById('admin-menu-notifications').classList.remove('hidden');
                document.getElementById('admin-menu-feedbacks').classList.remove('hidden');
                document.getElementById('admin-attendance-actions').classList.remove('hidden');
                
                // 显示管理员操作按钮
                document.querySelectorAll('.admin-only').forEach(el => {
                    el.classList.remove('hidden');
                });
                
                // 隐藏学生专属按钮
                document.querySelectorAll('.student-only').forEach(el => {
                    el.classList.add('hidden');
                });
            } else {
                // 隐藏管理员菜单
                document.getElementById('admin-menu-members').classList.add('hidden');
                document.getElementById('admin-menu-notifications').classList.add('hidden');
                document.getElementById('admin-menu-feedbacks').classList.add('hidden');
                document.getElementById('admin-attendance-actions').classList.add('hidden');
                
                // 隐藏管理员操作按钮
                document.querySelectorAll('.admin-only').forEach(el => {
                    el.classList.add('hidden');
                });
                
                // 显示学生专属按钮
                document.querySelectorAll('.student-only').forEach(el => {
                    el.classList.remove('hidden');
                });
            }
        }
    </script>
</body>
</html>
